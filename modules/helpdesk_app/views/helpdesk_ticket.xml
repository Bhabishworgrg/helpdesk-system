<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="helpdesk_app_helpdesk_ticket_view_list" model="ir.ui.view">
		<field name="name">helpdesk_app.helpdesk_ticket.view.list</field>
		<field name="model">helpdesk_app.helpdesk_ticket</field>
		<field name="arch" type="xml">
			<list>
				<field name="sequence" widget="handle"/>
				<field name="user_id" widget="many2one_avatar"/>
				<field name="title"/>
				<field name="stage_id"/>
				<field name="category_id"/>
				<field name="query" optional="1"/>
				<field name="reported_date"/>
				<field name="tag_ids" widget="many2many_tags" options="{ 'color_field': 'color' }"/>
			</list>
		</field>
	</record>

	<record id="helpdesk_app_helpdesk_ticket_view_form" model="ir.ui.view">
		<field name="name">helpdesk_app.helpdesk_ticket.view.form</field>
		<field name="model">helpdesk_app.helpdesk_ticket</field>
		<field name="arch" type="xml">
			<form>
				<header>
					<button name="%(helpdesk_app.action_helpdesk_app_helpdesk_ticket_send_wizard)d" string="Send Ticket" type="action" class="btn-primary"/>
					<button name="%(helpdesk_app.action_helpdesk_app_helpdesk_ticket_cancel_wizard)d" string="Cancel" type="action" class="btn-secondary" invisible="is_completed_or_cancelled"/>
					<button name="%(helpdesk_app.action_helpdesk_app_helpdesk_ticket_restore_wizard)d" string="Restore" type="action" class="btn-secondary" invisible="not is_completed_or_cancelled"/>
					<field name="stage_id" widget="statusbar"/>
				</header>
				<sheet>
					<widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>

					<label for="title"/>
					<h1>
						<field name="title" readonly="is_completed_or_cancelled"/>
					</h1>

					<group>
						<group>
							<field name="reported_date" readonly="True"/>
							<field name="user_id" options="{ 'no_create': True, 'no_create_edit': True, 'no_open': True }" widget="many2one_avatar" readonly="is_completed_or_cancelled"/>
							<field name="tag_ids" options="{ 'no_create': True, 'no_create_edit': True, 'no_open': True, 'color_field': 'color' }" widget="many2many_tags" readonly="is_completed_or_cancelled"/>
						</group>
						<group>
							<field name="type_id" options="{ 'no_create': True, 'no_create_edit': True, 'no_open': True }" readonly="True"/>
							<field name="category_id" options="{ 'no_create': True, 'no_create_edit': True, 'no_open': True }" readonly="is_completed_or_cancelled"/>
						</group>
						<group colspan="2">
							<field name="query" readonly="is_completed_or_cancelled"/>
							<field name="description" readonly="is_completed_or_cancelled"/>
						</group>
					</group>
				</sheet>
				<chatter reload_on_post="True"/>
			</form>
		</field>
	</record>

	<record id="helpdesk_app_helpdesk_ticket_view_search" model="ir.ui.view">
		<field name="name">helpdesk_app.helpdesk_ticket.view.search</field>
		<field name="model">helpdesk_app.helpdesk_ticket</field>
		<field name="arch" type="xml">
			<search>
				<filter name="filter_my_tickets" string="My Tickets" domain="[('user_id', '=', uid)]"/>
				<filter name="filter_archived" string="Archived" domain="[('active', '=', False)]"/>
				<separator/>
				<filter name="filter_reported_date" string="Reported Date" date="reported_date"/>
				<group>
					<filter name="group_create_uid" string="Created By" context="{ 'group_by':'create_uid' }"/>
					<filter name="group_reported_date" string="Reported Date" context="{ 'group_by':'reported_date' }"/>
				</group>
			</search>
		</field>
	</record>

	<record id="action_helpdesk_app_helpdesk_ticket_all" model="ir.actions.act_window">
		<field name="name">All Tickets</field>
		<field name="res_model">helpdesk_app.helpdesk_ticket</field>
		<field name="view_mode">list,form</field>
		<field name="context">
			{
				'search_default_filter_my_tickets' : 1,
			}
		</field>
	</record>
	
	<record id="action_helpdesk_app_helpdesk_ticket_completed" model="ir.actions.act_window">
		<field name="name">Completed Tickets</field>
		<field name="res_model">helpdesk_app.helpdesk_ticket</field>
		<field name="view_mode">list,form</field>
		<field name="context">
			{
				'search_default_filter_my_tickets' : 1,
			}
		</field>
	</record>

	<record id="action_helpdesk_app_helpdesk_ticket_incomplete" model="ir.actions.act_window">
		<field name="name">Incomplete Tickets</field>
		<field name="res_model">helpdesk_app.helpdesk_ticket</field>
		<field name="view_mode">list,form</field>
		<field name="context">
			{
				'search_default_filter_my_tickets' : 1,
			}
		</field>
	</record>
</odoo>
